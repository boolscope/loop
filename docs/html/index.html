<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Loop: Loop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Loop
   &#160;<span id="projectnumber">0.0.3</span>
   </div>
   <div id="projectbrief">An asynchronous delay simulation library for microcontrollers.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="classLoop.html">Loop</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> The <a class="el" href="classLoop.html">Loop</a> library provides the simplest tools for implementing asynchronous delays and timeouts in the runtime environment of microcontrollers.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Idea</h1>
<p>The delay() function, which is used to create timeouts, is a blocking function, that suspends the execution of the entire program for a specified time.</p>
<p>To simulate a timeout, we can use the built-in functions micros() or millis(), for example:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> interval = 1000;</div>
<div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> timestamp = 0;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    timestamp = millis();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    <span class="keywordflow">if</span> (millis() &gt; timestamp + interval){</div>
<div class="line">        <span class="comment">// ... perform some action</span></div>
<div class="line">        timestamp = millis();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>This library is a wrapper for the millis() function, for example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;loop.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="classLoop.html">Loop</a> loop;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">    loop.<a class="code" href="classLoop.html#a788d6865a5d667a0335bc40ab0bf6ea8">setInterval</a>(1000);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">    <span class="keywordflow">if</span> (loop.<a class="code" href="classLoop.html#acc0cbdaa89781141d7ffa79b3f1ad3d5">isReady</a>(<span class="keyword">true</span>)){</div>
<div class="line">        <span class="comment">// ... perform some action</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclassLoop_html"><div class="ttname"><a href="classLoop.html">Loop</a></div><div class="ttdef"><b>Definition:</b> loop.h:8</div></div>
<div class="ttc" id="aclassLoop_html_a788d6865a5d667a0335bc40ab0bf6ea8"><div class="ttname"><a href="classLoop.html#a788d6865a5d667a0335bc40ab0bf6ea8">Loop::setInterval</a></div><div class="ttdeci">void setInterval(unsigned long interval)</div><div class="ttdef"><b>Definition:</b> loop.cpp:9</div></div>
<div class="ttc" id="aclassLoop_html_acc0cbdaa89781141d7ffa79b3f1ad3d5"><div class="ttname"><a href="classLoop.html#acc0cbdaa89781141d7ffa79b3f1ad3d5">Loop::isReady</a></div><div class="ttdeci">bool isReady(bool reset=false)</div><div class="ttdef"><b>Definition:</b> loop.cpp:36</div></div>
</div><!-- fragment --><p>In addition, the library allows you to determine, for example, whether the ready state was reached at least once <code>isNever()</code> method; whether it is an even/odd state of readiness of <code>isEven()</code> and <code>isOdd()</code> methods; the number of times the state of readiness was reached <code>getCount()</code> method, etc.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Examples</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Segment Display with Async LED</h2>
<p>In this example, there is an asynchronous LED that flashes with its frequency and a display segment that changes its value according to the presses of the Inc and Dec buttons. The Inc or Dec button can be pressed and the value will change every second and this is not reflected in the flicker frequency of the asynchronous LED.</p>
<p>Circuits with a demonstration is available at the link: <a href="https://www.tinkercad.com/things/e4hsA8Pp3fF-segment-display-with-async-led">tinkercad</a></p>
<p><em>P.s. Pay attention to <b>Simulator time</b>, it may change during the simulation and may not correspond to real time.</em></p>
<h1><a class="anchor" id="autotoc_md4"></a>
Making changes to the code</h1>
<p>Make changes to examples/example.inject.into and test it on tinkercad. Run make split &amp;&amp; make doc and then create a pool request. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
